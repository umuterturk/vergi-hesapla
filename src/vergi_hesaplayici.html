<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extract YATIRIM İŞLEMLERİ</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }

        .controls-container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        label {
            font-weight: 500;
            color: #333;
        }

        select, input[type="number"] {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        input[type="file"] {
            padding: 10px;
            border: 2px dashed #ddd;
            border-radius: 4px;
            background-color: white;
            width: 100%;
            box-sizing: border-box;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px 8px;
            text-align: left;
            font-size: 14px;
        }

        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #333;
        }

        tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        tr:hover {
            background-color: #f2f2f2;
        }

        .table-header {
            background-color: #e9ecef !important;
            color: #495057;
            font-size: 16px;
            font-weight: bold;
        }

        .summary-container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-top: 20px;
        }

        .summary-container strong {
            display: block;
            margin-bottom: 10px;
            color: #333;
            font-size: 16px;
        }

        .negative-value {
            color: #dc3545;
        }

        .positive-value {
            color: #28a745;
        }

        .yiufe-change {
            font-weight: 500;
        }

        .yiufe-high {
            color: #dc3545;
            font-weight: bold;
        }

        .button-container {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }

        .download-button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .download-button:hover {
            background-color: #45a049;
        }

        .download-button i {
            font-size: 16px;
        }

        .coffee-button {
            padding: 10px 20px;
            background-color: #FFDD00;
            color: #000000;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 5px;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .coffee-button:hover {
            background-color: #FFE44D;
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .coffee-button i {
            font-size: 16px;
        }

        .disclaimer {
            margin-top: 20px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #dee2e6;
        }

        .disclaimer p:first-child {
            font-weight: bold;
            margin-bottom: 10px;
            color: #495057;
        }

        .disclaimer p {
            font-size: 14px;
            line-height: 1.5;
            color: #6c757d;
            margin: 0;
        }

        .disclaimer-checkbox {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #dee2e6;
        }

        .disclaimer-checkbox label {
            margin-left: 8px;
            cursor: pointer;
            color: #495057;
        }

        #uploadPdf[disabled] {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #333;
            font-size: 24px;
            margin: 0;
        }

        .upload-section {
            margin: 20px 0;
        }

        .actions-section {
            margin: 30px 0;
        }

        .button-container {
            margin: 15px 0;
        }

        .controls-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }

        @media (max-width: 768px) {
            .controls-container {
                flex-direction: column;
            }
            
            .control-group {
                width: 100%;
            }
        }

        .file-upload-label {
            display: inline-block;
            padding: 10px 20px;
            background-color: #f8f9fa;
            border: 2px dashed #ddd;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            width: 100%;
            text-align: center;
            box-sizing: border-box;
        }

        .file-upload-label:hover {
            background-color: #e9ecef;
            border-color: #adb5bd;
        }

        .file-upload-label i {
            margin-right: 8px;
        }

        input[type="file"] {
            display: none;
        }

        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .popup-content {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            text-align: center;
        }

        .popup-content p {
            margin: 0 0 20px 0;
            color: #495057;
        }

        .popup-content i {
            color: #dc3545;
            font-size: 24px;
            margin-right: 10px;
        }

        .popup-close {
            padding: 8px 20px;
            background-color: #0d6efd;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .popup-close:hover {
            background-color: #0b5ed7;
        }

        .privacy-notice {
            margin-bottom: 20px;
            padding: 10px;
            background-color: #e7f5ff;
            border-radius: 8px;
            border: 1px solid #b8daff;
        }

        .privacy-notice p:first-child {
            font-weight: bold;
            margin-bottom: 10px;
            color: #004085;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .privacy-notice p:last-child {
            font-size: 14px;
            line-height: 1.5;
            color: #004085;
            margin: 0;
        }

        .privacy-notice i {
            font-size: 18px;
        }

        .reset-disclaimer {
            display: block;
            margin-top: 10px;
            padding: 5px 10px;
            font-size: 12px;
            color: #6c757d;
            background: none;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            cursor: pointer;
        }

        .reset-disclaimer:hover {
            background-color: #f8f9fa;
        }

        .report-issue {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #b8daff;
        }

        .report-issue p {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0;
        }

        .report-button {
            padding: 5px 10px;
            background-color: #fff;
            border: 1px solid #b8daff;
            border-radius: 4px;
            color: #004085;
            text-decoration: none;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .report-button:hover {
            background-color: #f8f9fa;
            text-decoration: none;
        }

        .report-issue-footer {
            margin-top: 30px;
            text-align: center;
            font-size: 12px;
            color: #6c757d;
        }

        .report-issue-footer p {
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .report-issue-footer p i {
            font-size: 12px;
        }

        .report-options {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .report-button {
            color: #6c757d;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 8px;
            border-radius: 4px;
            transition: all 0.2s ease;
            font-size: 12px;
        }

        .report-button:hover {
            background-color: #f8f9fa;
            color: #495057;
            text-decoration: none;
        }

        .report-button i {
            font-size: 12px;
        }

        .report-divider {
            color: #adb5bd;
            font-size: 11px;
        }
    </style>
    <!-- Font Awesome için CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <div class="main-container">
        <div class="header">
            <h1>Midas USD Yatırım İşlemleri Vergi Hesaplayıcı</h1>
        </div>

        <div class="controls-container">
            <div class="control-group">
                <label for="vergiDonemi">Vergi Dönemi:</label>
                <select id="vergiDonemi">
                    <option value="2023">2023</option>
                    <option value="2024" selected>2024</option>
                </select>
            </div>

            <div class="control-group">
                <label for="vergiOrani">Vergi Oranı (%):</label>
                <input type="number" id="vergiOrani" value="15" min="0" max="100" step="1" style="width: 80px;">
            </div>
        </div>

        <div class="upload-section">
            <label for="uploadPdf" class="file-upload-label">
                <i class="fas fa-upload"></i> Midas Ekstrelerini Yükle
            </label>
            <input type="file" id="uploadPdf" multiple disabled />
        </div>
        <div class="actions-section">
            <div class="button-container">
                <button onclick="downloadCSV()" class="download-button">
                    <i class="fas fa-file-csv"></i> CSV İndir
                </button>
                <button onclick="downloadExcel()" class="download-button">
                    <i class="fas fa-file-excel"></i> Excel İndir
                </button>
            </div>

            <div class="button-container">
                <a href="https://www.buymeacoffee.com/umuterturk" target="_blank" class="coffee-button" id="coffeeButton1" title="Sence de hak etmedim mi?">
                    <i class="fas fa-coffee"></i>Bir kahvenin kırk yıl hatırı var
                </a>
            </div>
        </div>

        <div id="tableContainer"></div>


        <div class="privacy-notice">
            <p><i class="fas fa-shield-alt"></i> Gizlilik ve Güvenlik</p>
            <p>Bu uygulama tüm işlemleri tarayıcınızda gerçekleştirir. Yüklediğiniz dosyalar ve hesaplama verileri kesinlikle herhangi bir sunucuya gönderilmez veya depolanmaz. Tüm verileriniz yalnızca sizin cihazınızda kalır ve tarayıcı sekmesini kapattığınızda tamamen silinir.</p>
        </div>

        <div class="disclaimer">
            <p>Sorumluluk Reddi Beyanı:</p>
            <p>Bu araç sadece bilgilendirme amaçlıdır ve herhangi bir resmi veya yasal tavsiye niteliği taşımamaktadır. 
            Yapılan hesaplamalar tahmini değerler olup, kesin sonuçlar için lütfen mali müşavirinize veya vergi danışmanınıza başvurunuz. 
            Bu aracı kullanarak elde edilen sonuçlardan doğabilecek herhangi bir hatadan veya zarardan dolayı sorumluluk kabul edilmemektedir.</p>
            
            <div class="disclaimer-checkbox">
                <input type="checkbox" id="disclaimerAccept" required>
                <label for="disclaimerAccept">Sorumluluk reddi beyanını okudum ve kabul ediyorum. Bu onay tarayıcınızda saklanacak ve 30 gün boyunca tekrar sorulmayacaktır.</label>
            </div>
        </div>

        <div class="report-issue-footer">
            <p><i class="fas fa-bug"></i> Hata ve <i class="fas fa-lightbulb"></i>Önerileriniz için</p>
            <div class="report-options">
                <a href="https://github.com/umuterturk/vergi-hesaplayici/issues" target="_blank" class="report-button">
                    <i class="fab fa-github"></i> GitHub Issues (Önerilen)
                </a>
                <span class="report-divider">veya</span>
                <a href="mailto:umutert@gmail.com?subject=Vergi%20Hesaplayıcı%20Hata%20Bildirimi" class="report-button">
                    <i class="fas fa-envelope"></i> umutert@gmail.com
                </a>
            </div>
        </div>

        <div id="popup" class="popup">
            <div class="popup-content">
                <p><i class="fas fa-exclamation-circle"></i> Devam etmek için lütfen önce sorumluluk reddi beyanını okuyup kabul ediniz.</p>
                <button onclick="closePopup()" class="popup-close">Tamam</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
    <script src="https://cdn.sheetjs.com/xlsx-0.19.3/package/dist/xlsx.full.min.js"></script>
    <script src="js/vergi_hesaplayici.js"></script>
</body>
</html>
